import numpy as np
import scipy.spatial.distance as sp
import pandas as pd

def getNumpyArrayFromCSV(nameOfFile):
    return np.array(pd.read_csv(nameOfFile, header=None))

class KNN:
    def __init__(self, k, trainList):
        self.k=k
        self.trainList=np.array(trainList)

    def predict(self, testListData):
        self.distance= np.empty([len(testListData), len(self.trainList)], dtype=[('dist', float), ('label', 'S30')])
        for test in range (0, len(testListData), 1):
            print("Punkt: %d" %test)
            for trained in range (0, len(self.trainList), 1):
                self.distance[test][trained]=sp.euclidean(testListData[test], self.trainList[trained, 0:4]), self.trainList[trained, 4]
            self.tosort=np.array(self.distance[test], dtype=[('dist', float), ('label', 'S30'),])
            self.tosort.sort(order='dist')
            for i in range (self.k):
                self.tuple=self.tosort[i]
                print(self.tuple[1])

kNN = KNN(5, pd.read_csv("iris.data.learning", header=None))
kNN.predict(getNumpyArrayFromCSV("iris.data.test")[:,0:4])